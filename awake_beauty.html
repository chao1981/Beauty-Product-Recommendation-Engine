<!doctype html>
<html lang="en">
 <head>
  <!--set up basics-->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE-edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- title and everything has to come after set up basics codes-->
  <h1 style="text-align:center">Beauty Search Engine</h1>
  
  <!--Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <!--import libraries-->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <style>
    
    body {background-color:lightblue}
    h1   {color:plum}
    input{color:black}

    button {
    float: left;
    height: 100px;
    width: 100px;
    border-radius: 50px;
    border: 5px solid #000;
    margin: 5000;

}
    .wrapper {
       width: 800px;
       margin-left: auto;
       margin-right: auto;
       margin-bottom: 0px;
     }
     #bar_chart {
       margin-bottom: 0 px;
     }
    .bar {
       fill: #FF75A3;
     }
     span {
       color: steelblue;
     }

  

  

    .condition_box {
    float: left;
    margin: 1%;
    padding: 10px;
    width: 20%;
    height: 250px;
    border: 2px solid black;
} 
    .result_box {
    float: left;
    margin: 1%;
    padding: 10px;
    width: 30%;
    height: 250px;
    border: 2px solid black;

    }

</style>
</head>

<body>
  <div class="container">

      <!-- The justified navigation menu is meant for single line per list item.
           Multiple lines will require custom code not provided by Bootstrap. -->
      <div class="masthead">
        <h3 class="text-muted">Project name</h3>
        <nav>
          <ul class="nav nav-justified">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Projects</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Downloads</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </nav>
      </div>

      <!-- Jumbotron -->
      <div class="jumbotron">
        <form>
        <fieldset>
        <legend> The Beauty Information</legend>
          <div class="condition_box " >
           <h2> Skin type </h2>
          <div class="radio">
           <label>
          <input type="radio"  name="skin_type" value="dry_skin_score" id="dry_skin"> Dry Skin
            </label>
          </div>
          
          <div class="radio" >
           <label>
          <input type="radio" name="skin_type" value="oily_skin_score" id="oily_skin"> Oily Skin
            </label>
          </div>
          
          <div class="radio" >
           <label>
          <input type="radio" name="skin_type" value="combination_skin_score" id="combination_skin"> Combination Skin
            </label>
          </div>
          
         <!--  <div class="radio" >
           <label>
          <input type="radio" name="skin_type" value="0.0" id="normal_skin"> Normal Skin
            </label>
          </div> -->
      </div>

    <div class="condition_box" >
      <h2>Main concern</h2>
        <div class="radio" >
           <label>
          <input type="radio" name="main_concern" value="dry_skin_score"> Dry Skin
            </label>
          </div>
          
          <div class="radio" >
           <label>
          <input type="radio" name="main_concern" value="acne_score"> Acnes
            </label>
          </div>
          
          <div class="radio" >
           <label>
          <input type="radio" name="main_concern" value="anti_aging_score"> Anti-Aging
            </label>
          </div>

          <div class="radio" >
           <label>
          <input type="radio" name="main_concern" value="redness_score"> Redness
            </label>
          </div>
    </div>

    <div class="condition_box ">
      <h2>Other concerns</h2>
        <div class="checkbox" method="get" >
           <label>
          <input type="checkbox" name="check" value="dry_skin_score"> Dry Skin
            </label>
          </div>
          
          <div class="checkbox" method="get">
           <label>
          <input type="checkbox" name="check" value="acne_score"> Acnes
            </label>
          </div>
          
          <div class="checkbox" method="get">
           <label>
          <input type="checkbox" name="check" value="anti_aging_score"> Anti-Aging
            </label>
          </div>
          
          <div class="checkbox" method="get">
           <label>
          <input type="checkbox" name="check" value="redness_score"> Redness
            </label>
          </div>

          <div class="checkbox" method="get">
           <label>
          <input type="checkbox" name="check" value="sensitive_score"> Sensitive Skin
            </label>
          </div>

          <div class="checkbox" method="get">
           <label>
          <input type="checkbox" name="check" value="sunscreen_score"> Sun Protection
            </label>
          </div>
    </div>

   <div class="condition_box ">
      <h2>What else?</h2>
      <textarea name="extra_information" rows="12" cols="26" id="textbox"></textarea>
        
    </div>
  <!--   <input type="submit" value="submit"> -->
  <button type="submit" class="btn btn-lg btn-success">Submit</button>
  </fieldset>
</form>

  </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="col-lg-4" id="product_1">
          <h2>Product 1</h2>
          
          <p><a class="btn btn-primary" href="#" role="button">View details &raquo;</a></p>
        </div>
        <div class="col-lg-4">
          <h2>Product 2</h2>
          <p> </p>
          <p><a class="btn btn-primary" href="#" role="button">View details &raquo;</a></p>
       </div>
        <div class="col-lg-4">
          <h2>Product 3</h2>
          <p></p>
          <p><a class="btn btn-primary" href="#" role="button">View details &raquo;</a></p>
        </div>
      </div>

      <!-- Site footer -->
      <footer class="footer">
        <p>&copy; Company 2014</p>
      </footer>

    </div> <!-- /container -->


  

  <div class="result_box" id = "product_1">
    <textarea name="extra_information" rows="12" cols="26" id="textbox" value=""></textarea>
  </div>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
  $('form').on('submit', function(e) {
    e.preventDefault();
    e.returnValue = false;
    recommend_product()
    
  });
  


  function recommend_product(){
    var other_concerns = $.map($("input:checkbox:checked"), function(elem){return $(elem).val();});

    var skin_id = $('input[name="skin_type"]:checked').val();

    var priority_concern = $('input[name="main_concern"]:checked').val();

    var user_spec = document.getElementById("textbox").value;

    var input_data = "{\"skin_type\": [\"" + skin_id + "\"],\"priority\":[\"" + priority_concern + "\"],\"others\":[\"" + other_concerns + "\"],\"extra_info\":[\"" + user_spec + "\"]}";
    console.log(input_data);


    $.ajax({
      type:"POST",
      contentType: "application/json; charset=utf-8",
      url:"/recommendation",
      dataType:"json",
      async:true,
      data: input_data,
      success: function(data){
        // console.log('data is', data);
        $("#product_1").text(data[1][0]);
        // var mytextbox = document.getElementById("product_1");
        //                           mytextbox = mytextbox.value+ data.keys()[1];
                                  },
      error: function(result) { console.log("error!", result)}


    })

  }

  
</script>





 
   

</body>


</html>